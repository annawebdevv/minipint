{"ast":null,"code":"var _jsxFileName = \"/Users/user/Documents/\\u041D\\u043E\\u0432\\u0430\\u044F \\u043F\\u0430\\u043F\\u043A\\u0430/minipint/src/components/Forms/AuthorizationForm.tsx\",\n    _s = $RefreshSig$();\n\nimport { useRef, useEffect, useState } from \"react\";\nimport { useInput } from \"../../hooks/useInput\";\nimport store from \"../../store/store\";\nimport { Button } from \"../common/Button/Button\";\nimport { Input } from \"../common/Input/styles\";\nimport { Link, FormContainer, Label } from \"./styles\";\nimport { login } from \"../../auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthorizationForm = () => {\n  _s();\n\n  const [hint, setHint] = useState(null);\n  const inputRef = useRef(null);\n  const {\n    value: email,\n    onChange: onChangeEmail,\n    error: emailError,\n    onBlur: onBlurEmail,\n    clear: clearEmail\n  } = useInput(\"\", true, \"Введите Email\");\n  const {\n    value: password,\n    onChange: onChangePassword,\n    error: passwordError,\n    onBlur: onBlurPassword,\n    clear: clearPassword\n  } = useInput(\"\", true, \"Введите пароль\");\n\n  const toRegestration = () => {\n    clearEmail();\n    clearPassword();\n    store.setCurrentModal(\"RegistrationForm\");\n  };\n\n  const handleSubmit = () => {\n    if (!password || !email) {\n      setHint(\"Заполни все поля\");\n    } else {\n      login(email, password, setHint);\n      clearEmail();\n      clearPassword();\n    }\n  };\n\n  const EnterKeydown = event => {\n    const {\n      key\n    } = event;\n\n    if (key === \"Enter\") {\n      handleSubmit();\n    }\n  };\n\n  useEffect(() => {\n    if (store.isModal === true) inputRef.current.focus();\n    window.addEventListener(\"keydown\", EnterKeydown);\n    return () => {\n      window.removeEventListener(\"keydown\", EnterKeydown);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [store.isModal]);\n  useEffect(() => {\n    window.addEventListener(\"keydown\", EnterKeydown);\n    return () => {\n      window.removeEventListener(\"keydown\", EnterKeydown);\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(FormContainer, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Authorization\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Label, {\n      children: [\"Email\", /*#__PURE__*/_jsxDEV(Input, {\n        ref: inputRef,\n        value: email ? email : \"\",\n        onChange: onChangeEmail,\n        onBlur: onBlurEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: emailError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Label, {\n      children: [\"Password\", /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        value: password ? password : \"\",\n        onChange: onChangePassword,\n        onBlur: onBlurPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: passwordError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), hint && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: hint\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex space-btw\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        children: \"or Sign Up\",\n        onClick: toRegestration\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        children: \"Sign In\",\n        onClick: handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthorizationForm, \"T8/QJh9tS8m0qZikuFd51gzpx5Y=\", false, function () {\n  return [useInput, useInput];\n});\n\n_c = AuthorizationForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthorizationForm\");","map":{"version":3,"names":["useRef","useEffect","useState","useInput","store","Button","Input","Link","FormContainer","Label","login","AuthorizationForm","hint","setHint","inputRef","value","email","onChange","onChangeEmail","error","emailError","onBlur","onBlurEmail","clear","clearEmail","password","onChangePassword","passwordError","onBlurPassword","clearPassword","toRegestration","setCurrentModal","handleSubmit","EnterKeydown","event","key","isModal","current","focus","window","addEventListener","removeEventListener"],"sources":["/Users/user/Documents/Новая папка/minipint/src/components/Forms/AuthorizationForm.tsx"],"sourcesContent":["import {\n  FC,\n  useRef,\n  useEffect,\n  MouseEventHandler,\n  useState,\n  KeyboardEventHandler,\n} from \"react\";\nimport { useInput } from \"../../hooks/useInput\";\nimport store from \"../../store/store\";\n\nimport { Button } from \"../common/Button/Button\";\nimport { Input } from \"../common/Input/styles\";\n\nimport { Link, FormContainer, Label } from \"./styles\";\n\nimport { login } from \"../../auth\";\n\nexport const AuthorizationForm: FC = () => {\n  const [hint, setHint] = useState<string | null>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const {\n    value: email,\n    onChange: onChangeEmail,\n    error: emailError,\n    onBlur: onBlurEmail,\n    clear: clearEmail,\n  } = useInput(\"\", true, \"Введите Email\");\n\n  const {\n    value: password,\n    onChange: onChangePassword,\n    error: passwordError,\n    onBlur: onBlurPassword,\n    clear: clearPassword,\n  } = useInput(\"\", true, \"Введите пароль\");\n\n  const toRegestration: MouseEventHandler<HTMLElement> = () => {\n    clearEmail();\n    clearPassword();\n    store.setCurrentModal(\"RegistrationForm\");\n  };\n\n  const handleSubmit = () => {\n    if (!password || !email) {\n      setHint(\"Заполни все поля\");\n    } else {\n      \n      login(email, password, setHint);\n      clearEmail();\n      clearPassword();\n\n    }\n  };\n\n  const EnterKeydown = (event: KeyboardEvent) => {\n    const { key } = event;\n    if (key === \"Enter\") {\n      handleSubmit();\n    }\n  };\n\n\n  useEffect(() => {\n    if (store.isModal === true) inputRef.current!.focus();\n    window.addEventListener(\"keydown\", EnterKeydown);\n    return () => {\n      window.removeEventListener(\"keydown\", EnterKeydown);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [store.isModal]);\n\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", EnterKeydown);\n    return () => {\n      window.removeEventListener(\"keydown\", EnterKeydown);\n    };\n  });\n\n  return (\n    <FormContainer>\n      <h3>Authorization</h3>\n      <hr />\n\n      <Label>\n        Email\n        <Input\n          ref={inputRef}\n          value={email ? email : \"\"}\n          onChange={onChangeEmail}\n          onBlur={onBlurEmail}\n        />\n        <div className=\"error\">{emailError}</div>\n      </Label>\n\n      <Label>\n        Password\n        <Input\n          type=\"password\"\n          value={password ? password : \"\"}\n          onChange={onChangePassword}\n          onBlur={onBlurPassword}\n        />\n        <div className=\"error\">{passwordError}</div>\n      </Label>\n\n      {hint && <div className=\"error\">{hint}</div>}\n\n      <div className=\"flex space-btw\">\n        <Link children=\"or Sign Up\" onClick={toRegestration} />\n\n        <Button children=\"Sign In\" onClick={handleSubmit} />\n      </div>\n    </FormContainer>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}