{"ast":null,"code":"var _jsxFileName = \"/Users/user/Documents/\\u041D\\u043E\\u0432\\u0430\\u044F \\u043F\\u0430\\u043F\\u043A\\u0430/minipint/src/components/Forms/AddPhotoForm.tsx\",\n    _s = $RefreshSig$();\n\nimport { observer } from \"mobx-react-lite\";\nimport { useRef, useEffect, useState } from \"react\";\nimport { useInput } from \"../../hooks/useInput\";\nimport store from \"../../store/store\";\nimport { Button } from \"../common/Button/Button\";\nimport { Input } from \"../common/Input/styles\";\nimport { Cancel, FormContainer, Label } from \"./styles\";\nimport { v4 } from \"uuid\";\nimport { db } from \"../../firebase\";\nimport { set, ref } from \"firebase/database\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AddPhotoForm = _s(observer(_c = _s(() => {\n  _s();\n\n  const [hint, setHint] = useState(null);\n  const inputRef = useRef(null);\n  const {\n    value: description,\n    onChange: onChangeDescription,\n    error: descriptionError,\n    onBlur: onBlurDescription,\n    clear: clearDescription\n  } = useInput(\"\", true, \"Придумай небольшое описание картинки\");\n  const {\n    value: url,\n    onChange: onChangeUrl,\n    error: urlError,\n    onBlur: onBlurUrl,\n    clear: clearUrl\n  } = useInput(\"\", true, \"Добавь ссылку на картинку\");\n\n  const handleClickCancel = () => {\n    clearDescription();\n    clearUrl();\n    store.setIsModal(false);\n  };\n\n  const addPhoto = () => {\n    if (!url || !description) {\n      setHint(\"Заполни все поля\");\n    } else {\n      const uuid = v4();\n      set(ref(db, `/${uuid}`), {\n        id: uuid,\n        url,\n        description\n      });\n      setHint(null);\n      store.setIsModal(false);\n      clearDescription();\n      clearUrl();\n    }\n  };\n\n  useEffect(() => {\n    if (store.isModal === true) inputRef.current.focus(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [store.isModal]);\n  return /*#__PURE__*/_jsxDEV(FormContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Label, {\n      children: [\"Description\", /*#__PURE__*/_jsxDEV(Input, {\n        ref: inputRef,\n        value: description ? description : \"\",\n        onChange: onChangeDescription,\n        onBlur: onBlurDescription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: descriptionError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Label, {\n      children: [\"Photo URL\", /*#__PURE__*/_jsxDEV(Input, {\n        value: url ? url : \"\",\n        onChange: onChangeUrl,\n        onBlur: onBlurUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: urlError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), hint && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: hint\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex right\",\n      children: [/*#__PURE__*/_jsxDEV(Cancel, {\n        children: \"Cancel\",\n        onClick: handleClickCancel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        children: \"Submit\",\n        onClick: addPhoto\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}, \"qKTXfZPqT3KP3RE2MwVQk2wd0oA=\", false, function () {\n  return [useInput, useInput];\n})), \"qKTXfZPqT3KP3RE2MwVQk2wd0oA=\", false, function () {\n  return [useInput, useInput];\n});\n_c2 = AddPhotoForm;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AddPhotoForm$observer\");\n$RefreshReg$(_c2, \"AddPhotoForm\");","map":{"version":3,"names":["observer","useRef","useEffect","useState","useInput","store","Button","Input","Cancel","FormContainer","Label","v4","db","set","ref","AddPhotoForm","hint","setHint","inputRef","value","description","onChange","onChangeDescription","error","descriptionError","onBlur","onBlurDescription","clear","clearDescription","url","onChangeUrl","urlError","onBlurUrl","clearUrl","handleClickCancel","setIsModal","addPhoto","uuid","id","isModal","current","focus"],"sources":["/Users/user/Documents/Новая папка/minipint/src/components/Forms/AddPhotoForm.tsx"],"sourcesContent":["import { observer } from \"mobx-react-lite\";\nimport { FC, useRef, useEffect, MouseEventHandler, useState } from \"react\";\nimport { useInput } from \"../../hooks/useInput\";\nimport store from \"../../store/store\";\n\nimport { Button } from \"../common/Button/Button\";\nimport { Input } from \"../common/Input/styles\";\n\nimport { Cancel, FormContainer, Label } from \"./styles\";\n\nimport { v4 } from \"uuid\";\nimport { db } from \"../../firebase\";\nimport { set, ref } from \"firebase/database\";\n\n\nexport const AddPhotoForm: FC = observer(() => {\n  const [hint, setHint] = useState<string | null>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const {\n    value: description,\n    onChange: onChangeDescription,\n    error: descriptionError,\n    onBlur: onBlurDescription,\n    clear: clearDescription,\n  } = useInput(\"\", true, \"Придумай небольшое описание картинки\");\n\n  const {\n    value: url,\n    onChange: onChangeUrl,\n    error: urlError,\n    onBlur: onBlurUrl,\n    clear: clearUrl,\n  } = useInput(\"\", true, \"Добавь ссылку на картинку\");\n\n  const handleClickCancel: MouseEventHandler<HTMLButtonElement> = () => {\n    clearDescription();\n    clearUrl();\n    store.setIsModal(false);\n  };\n\n  const addPhoto: MouseEventHandler<HTMLButtonElement> = () => {\n    if (!url || !description) {\n      setHint(\"Заполни все поля\");\n    } else {\n      const uuid = v4();\n      set(ref(db, `/${uuid}`), { id: uuid, url, description });\n      setHint(null);\n      store.setIsModal(false);\n\n      clearDescription();\n      clearUrl();\n    }\n  };\n  \n  useEffect(() => {\n    if (store.isModal === true) inputRef.current!.focus();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [store.isModal]);\n\n  return (\n    <FormContainer>\n      <Label>\n        Description\n        <Input\n          ref={inputRef}\n          value={description ? description : \"\"}\n          onChange={onChangeDescription}\n          onBlur={onBlurDescription}\n        />\n        <div className=\"error\">{descriptionError}</div>\n      </Label>\n\n      <Label>\n        Photo URL\n        <Input\n          value={url ? url : \"\"}\n          onChange={onChangeUrl}\n          onBlur={onBlurUrl}\n        />\n        <div className=\"error\">{urlError}</div>\n      </Label>\n\n      {hint && <div className=\"error\">{hint}</div>}\n\n      <div className=\"flex right\">\n        <Cancel children=\"Cancel\" onClick={handleClickCancel} />\n        <Button children=\"Submit\" onClick={addPhoto} />\n      </div>\n    </FormContainer>\n  );\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}